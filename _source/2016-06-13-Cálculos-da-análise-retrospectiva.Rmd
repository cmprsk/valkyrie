---
layout: post
title:  "Cálculos da análise retrospectiva"
date:   2016-06-13 16:03:45 -0300
categories: metodologia
---

## Curva de sobrevida da análise retrospectiva:

```{r warning=F, message=F, echo=F}
require(RCurl)
require(survival)
dipg<-read.csv(text = getURL("https://raw.githubusercontent.com/fhcflx/valkyrie/gh-pages/assets/stat/dipg.csv"))

```

```{r Sobrevida, fig.height=10, fig.width=12, fig.cap='Sobrevida de pacientes com DIPG'}
plot(survfit(Surv(surv,status)~1,dipg),xlab="Meses")

```

Grupo de pacientes com diagnóstico de DIPG tratados em nosso serviço, entre 2000 e 2013. O gráfico mostra a estimativa de probabilidade de sobrevida, calculada pelo método de Kaplan-Meier, usando a linguagem de programação R, pacote *survival*. O pacote *RCurl* foi adicionalmente utilizado para capturar os dados a partir do arquivo [.csv](https://github.com/fhcflx/valkyrie/blob/gh-pages/assets/stat/dipg.csv) armazenado no repositório do github. O gráfico mostra também o intervalo de confiança 95%.
Este é o resumo da variável de sobrevida, além da sobrevida em 12 meses e tempo de follow-up:

```{r}
survfit(Surv(surv,status)~1,dipg)
```
```{r}
summary(survfit(Surv(surv,status)~1,dipg),time=12)
```
```{r}
survfit(Surv(surv,ifelse(status<1,1,0))~1,dipg)
```

Aqui, o gráfico comparativo entre os pacientes que fizeram QT segundo um esquema HIT e os outros pacientes:

```{r Sobrevida2, fig.height=10, fig.width=12, fig.cap='Sobrevida de pacientes com DIPG, divididos por tratamento'}
plot(survfit(Surv(surv,status)~ifelse(QT1<10,0,1),dipg),xlab="Meses")
```
E o resumo da sobrevida nos 2 grupos, com sobrevida aos 12 meses:
```{r}
survfit(Surv(surv,status)~ifelse(QT1<10,0,1),dipg)
```
```{r}
summary(survfit(Surv(surv,status)~ifelse(QT1<10,0,1),dipg),time=12)
```
